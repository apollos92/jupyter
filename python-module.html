<!DOCTYPE HTML>
<html lang="ko">
<h1 class="page-subject">
    1) 모듈 만들기
    
        
    
</h1>

<div class="page-content tex2jax_process">
    <p>파이썬에는 다양한 기능을 수행하는 모듈이 기본적으로 제공됩니다(파이썬을 설치할 때 함께 설치됩니다). 파이썬으로 프로그래밍하다 보면 많은 부분을 파이썬의 모듈을 통해 구현합니다. 파이썬 모듈이란 자주 사용되는 기능에 대해 이미 코드로 구현해둔 것이기 때문에 파이썬 모듈을 이용하면 직접 특정 기능을 구현하는 것보다 쉽고 빠르게 프로그램을 개발할 수 있습니다. </p>
<p>파이썬의 기본 모듈은 프로그래밍을 잘하는 개발자들이 이미 개발해 둔 것인데, 이처럼 이미 개발된 모듈을 사용할 수도 있지만 직접 모듈을 만들 수도 있습니다. 이번 절에서는 모듈을 직접 만들어보면서 모듈의 개념을 더욱 정확히 이해해 보겠습니다. </p>
<p>앞에서 상한가와 하한가를 구하는 함수를 파이썬 IDLE에서 구현해 봤습니다. 문제는 파이썬 IDLE를 닫으면 더는 해당 함수를 사용할 수 없게 된다는 점입니다. 여러분이 구현한 상한가와 하한가를 계산하는 함수를 파일로 작성해 이를 모듈로 만들어 봅시다. 이렇게 모듈로 만들어 두면 두고두고 사용할 수 있습니다. 
그림 5.7과 같이 파이썬 IDLE에서 File 메뉴를 선택한 후 New File을 선택합니다. </p>
<p><img alt="" src="https://wikidocs.net/images/page/3139/05.07.png" /></p>
<p><strong>그림 5.7 파이썬 IDLE에서 새 파일 열기</strong></p>
<p>새 창에 다음과 같이 코드를 작성합니다. 앞에서 구현한 상한가와 하한가를 구하는 함수를 그대로 구현하고 추가로 author라는 변수가 pystock이라는 문자열을 바인딩하게 했습니다. 한가지 주의할 점은 다음 코드는 말 그대로 파이썬 코드이므로 &gt;&gt;&gt;와 같은 파이썬 프롬프트가 없다는 점입니다. </p>
<pre><code class="py">def cal_upper(price):
    increment = price * 0.3
    upper_price = price + increment
    return upper_price

def cal_lower(price):
    decrement = price * 0.3
    lower_price = price - decrement
    return lower_price

author = &quot;pystock&quot;
</code></pre>

<p>코드를 작성하고 나면 그림 5.8과 같이 File 메뉴에서 Save 메뉴를 클릭해 파일로 저장합니다. </p>
<p><img alt="" src="https://wikidocs.net/images/page/3139/05.08.png" /> </p>
<p><strong>그림 5.8 파이썬 코드 저장</strong></p>
<p>파이썬 코드를 파일로 저장할 때 그림 5.9와 같이 저장될 파일의 경로를 C:/Anaconda3 디렉터리로 선택한 후 파일명을 stock으로 변경하고 저장 버튼을 클릭합니다. 따라서 방금 작성한 코드의 저장 경로는 C:/Anaconda3/stock.py가 됩니다.  </p>
<p><img alt="" src="https://wikidocs.net/images/page/3139/05.09.png" /> </p>
<p><strong>그림 5.9 파이썬 코드 저장(2)</strong></p>
<p>지금까지 작업한 내용을 요약해보면 함수를 구현하고 이를 stock.py라는 이름으로 하드디스크에 저장했습니다. 이제 앞에서 작성한 stock이라는 모듈을 사용해 보겠습니다. 앞서 설명한 것처럼 모듈을 사용하려면 모듈을 임포트해야 합니다. </p>
<p>그림 5.10과 같이 파이썬 IDLE에서 stock 모듈을 임포트해 봅시다. 여기서 오류가 발생하지 않으면 stock 모듈을 잘 만들었고 해당 모듈이 정상적으로 임포트된 것입니다. </p>
<p><img alt="" src="https://wikidocs.net/images/page/3139/05.10.png" /> </p>
<p><strong>그림 5.10 stock 모듈 임포트</strong></p>
<p>앞에서 구현한 stock 모듈에는 author라는 변수와 cal_upper와 cal_lower라는 함수가 있었습니다. 파이썬에서는 모듈을 임포트하면 모듈 내에 구현된 함수나 변수를 사용할 수 있습니다. 먼저 다음과 같이 stock 모듈 내에 있던 변수 author를 화면에 출력해봅시다. 이때 author라는 변수명을 바로 적으면 안 되고 stock.author라고 적어야 합니다. 모듈 내의 함수나 변수명에 접근할 때는 항상 '모듈명.함수명(변수명)'과 같은 형태로 적어야 합니다. </p>
<pre><code class="py">&gt;&gt;&gt; print(stock.author)
pystock
&gt;&gt;&gt;
</code></pre>

<p>이번에는 stock 모듈 내에 구현된 함수를 호출해 보겠습니다. 함수 역시 먼저 모듈명을 적은 후 '.'를 붙이고 함수명을 적어야 합니다. 이렇게 하는 이유는 해당 함수가 stock이라는 모듈 내에 정의돼 있다는 것을 명시적으로 알려주기 위해서입니다. stock.py 파일에 구현된 cal_upper와 cal_lower 함수를 사용할 수 있음을 확인할 수 있습니다. </p>
<pre><code class="py">&gt;&gt;&gt; stock.cal_upper(10000)
13000.0
&gt;&gt;&gt; stock.cal_lower(10000)
7000.0
&gt;&gt;&gt;
</code></pre>

<p>여러분이 앞으로 모듈을 개발하고 이를 배포하고자 한다면 모듈에 구현된 함수가 정상적으로 동작하는지 충분히 테스트한 후 모듈을 배포해야 합니다. 이를 위해서는 모듈 파일 내에서 함수를 직접 호출하는 테스트 코드를 구현하는 것이 좋습니다.</p>
<p>다음과 같이 stock.py 파일에 cal_upper와 cal_lower 함수를 호출하는 코드를 추가해 줍니다. 그리고 <code>print(__name__)</code>도 추가해줍니다.</p>
<pre><code class="py">def cal_upper(price):
    increment = price * 0.3
    upper_price = price + increment
    return upper_price

def cal_lower(price):
    decrement = price * 0.3
    lower_price = price - decrement
    return lower_price

author = &quot;pystock&quot;

print(cal_upper(10000))
print(cal_lower(10000))
print(__name__)
</code></pre>

<p>수정 된 stock.py 파일을 실행하려면 그림 5.11처럼 Run -&gt; Run Module 메뉴를 차례로 선택합니다. </p>
<p><img alt="" src="https://wikidocs.net/images/page/3139/05.11.png" /> </p>
<p><strong>그림 5.11 모듈 코드 실행</strong></p>
<p>파이썬 IDLE에 다음과 같이 stock.py 파일의 실행 결과가 출력됩니다. 10,000원에 대한 상한가와 하한가가 모두 정상적으로 출력됨을 확인할 수 있습니다. 그리고 <code>print(__name__)</code>의 결과로 <code>__main__</code>이라는 문자열이 화면에 출력됨을 확인할 수 있습니다. </p>
<pre><code class="py">&gt;&gt;&gt; 
======================= RESTART: C:\Anaconda3\stock.py =======================
13000.0
7000.0
__main__
&gt;&gt;&gt;
</code></pre>

<p>업데이트된 stock 모듈을 다시 임포트 해보겠습니다. stock 모듈을 임포트하면 앞서 추가했던 print 구문의 결괏값이 출력됨을 확인할 수 있습니다. 모듈을 테스트하는 입장에서는 모듈 내에 테스트 코드를 넣는 방식은 유용하지만, 모듈을 사용하는 입장에서는 임포트할 때 모듈을 테스트하는 코드가 같이 실행되는 것은 불필요한 기능입니다.</p>
<pre><code class="py">&gt;&gt;&gt; import stock
13000.0
7000.0
stock
&gt;&gt;&gt;
</code></pre>

<p>여기서 한가지 눈여겨볼 점은 모듈을 직접 실행했을 때는 <code>print(__name__)</code>의 결과로 <code>__main__</code>이라는 문자열이 출력되지만, 해당 모듈을 임포트했을 때는 모듈의 이름인 stock이라는 문자열이 출력된다는 점입니다. </p>
<p>사실 파이썬에서 <code>__name__</code>이라는 변수는 파이썬 자체에서 사용하는 변수로 특정 파이썬 파일이 직접 실행된 것인지 또는 다른 파이썬 파일에서 임포트 된 것인지를 확인하는 용도로 사용됩니다. 특정 파이썬 파일이 독립적으로 실행됐다면 <code>__name__</code>이라는 변수는 <code>__main__</code>이라는 문자열을 바인딩하며 다른 파일에 임포트 된 경우에는 자신의 파일명을 바인딩합니다. </p>
<p>파이썬의 <code>__name__</code>이라는 변수를 사용하면 앞서 모듈의 테스트 코드가 모듈을 임포트했을 때 자동으로 호출되는 문제를 해결할 수 있습니다. stock.py 파일에 추가했던 테스트 코드를 다음과 같이 수정합니다. </p>
<pre><code class="py">if __name__ == &quot;__main__&quot;:
    print(cal_upper(10000))
    print(cal_lower(10000))
    print(__name__)
</code></pre>

<p>추가된 코드의 의미를 살펴보면 <code>__name__</code>이라는 파이썬 변수가 바인딩하고 있는 값이 <code>__main__</code>이라는 문자열이라면 들여쓰기 된 세 개의 print문을 실행합니다. 즉, stock.py 파일이 직접 실행이 된 경우라면 세 개의 print문이 실행됩니다. 만약 다른 파일에 stock.py 파일(모듈)이 임포트 된다면 <code>__name__</code>은 모듈의 이름인 stock을 바인딩하므로 if 문의 조건식을 만족하지 않고 따라서 세 개의 print문도 실행되지 않습니다. </p>
<p>stock.py 파일을 수정했다면 stock 모듈을 다시 임포트해보기 바랍니다. stock.py 파일에 여전히 모듈을 테스트하는 코드가 존재하지만 해당 코드가 실행되지 않았음을 확인할 수 있습니다. </p>
<pre><code class="py">Python 3.5.2 |Anaconda 4.1.1 (32-bit)| (default, Jul  5 2016, 11:45:57) [MSC v.1900 32 bit (Intel)] on win32
Type &quot;copyright&quot;, &quot;credits&quot; or &quot;license()&quot; for more information.
&gt;&gt;&gt; import stock
&gt;&gt;&gt;
</code></pre>

<p>그림 5.11과 같이 stock.py 파일을 직접 실행시키면 다음과 같이 여전히 테스트가 코드가 출력됨을 확인할 수 있습니다. </p>
<pre><code class="py">&gt;&gt;&gt; 
======================= RESTART: C:\Anaconda3\stock.py =======================
13000.0
7000.0
__main__
&gt;&gt;&gt;
</code></pre>
</div>
</html>